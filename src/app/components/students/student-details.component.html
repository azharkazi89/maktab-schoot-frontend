<div class="container mt-4">
  <h2 class="mb-4">Student Details</h2>

  <!-- Row 1: Basic Info -->
  <div class="row mb-4">
    <!-- Left column -->
    <div class="col-md-4">
      <div class="card shadow-sm rounded-3">
        <div class="card-header bg-primary text-white">Basic Info</div>
        <div class="card-body">
          <p><strong>Name:</strong> {{ student?.name }}  {{ student?.surName }}</p>
          <p><strong>Roll No.:</strong> {{ student?.rollNo }}</p>
          <p><strong>Age:</strong> {{ student?.age }}</p>
          <p><strong>Gender:</strong> {{ student?.gender }}</p>
          <p><strong>Father Name:</strong> {{ student?.fatherName }}</p>
          <p><strong>Guardian Name:</strong> {{ student?.guardianName }}</p>
          <p><strong>Phone:</strong> {{ student?.phone }} | <strong>Whatsapp:</strong> {{student?.whatsapp}}</p>
          <p><strong>Admission Date:</strong> {{ student?.admissionDate }}</p>
        </div>
      </div>
    </div>

    <!-- Center column -->
    <div class="col-md-4">
      <div class="card shadow-sm rounded-3">
        <div class="card-header bg-success text-white">Class</div>
        <div class="card-body">

          <p><strong>Class:</strong> {{ student?.maktabClass?.name }}</p>

          <h6 class="mt-3">Teachers</h6>
          <table class="table table-sm table-bordered">
            <thead class="table-light">
            <tr>
              <th>Name</th>
              <th>Phone No.</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let teacher of student?.maktabClass?.teachers">
              <td>{{ teacher.fullName }}</td>
              <td>{{ teacher.phone }}</td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Right column -->
    <div class="col-md-4">
      <div class="card shadow-sm rounded-3">
        <div class="card-header bg-info text-white">Photo</div>
        <div class="card-body text-center">
          <img
            [src]="student?.photoUrl
            ? student.photoUrl
            : (student.gender === 'Male'
                ? 'assets/boy-default.png'
                : 'assets/girl-default.png')"
            alt="Student Photo"
            class="img-fluid rounded shadow-sm"
            style="max-height: 200px;">
        </div>

      </div>
    </div>
  </div>

  <!-- Row 2: Fees + Attendance -->
  <div class="row mb-4">
    <!-- Fees -->
    <div class="col-md-6">
      <div class="card shadow-sm rounded-3">
        <div class="card-header bg-warning text-dark">Fees</div>
        <div class="card-body">
          <p><strong>Total Fees:</strong> ₹{{ totalFees }}</p>
          <p><strong>Paid:</strong> ₹{{ paidFees }}</p>
          <p><strong>Due:</strong> ₹{{ dueFees }}</p>
        </div>

        <!-- Optional: show a message if fees are not available -->
        <div *ngIf="!student?.fees">
          <p>Fees data not available.</p>
        </div>

      </div>
    </div>

    <!-- Attendance -->
    <div class="col-md-6">
      <div class="card shadow-sm rounded-3">
        <div class="card-header bg-secondary text-white">Attendance</div>
        <div class="card-body">
         <!-- <p><strong>Total Days:</strong> {{ student.attendance.total }}</p>
          <p><strong>Attended:</strong> {{ student.attendance.attended }}</p>-->
          <p><strong>Absent:</strong> {{ student.attendance.absent }} days</p>
         <!-- <p>
            <strong>Percentage:</strong>
          {{ attendancePercentage | number:'1.0-2' }}%
          </p>-->
        </div>
      </div>
    </div>
  </div>

  <!-- Action Buttons -->
  <div class="d-flex gap-2">
    <!--<app-back-button></app-back-button>-->
    <button class="btn btn-primary" (click)="getAttendance(student.id!)">
      View Attendance Details
    </button>
    <button class="btn btn-primary" (click)="getFeesDetails(student.id!)">
      View Fees Details
    </button>
  </div>
</div>
